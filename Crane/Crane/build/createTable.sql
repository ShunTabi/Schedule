CREATE TABLE T_COMITEM(
TABLEKIND TEXT NOT NULL,
CODE INTEGER NOT NULL,
NAME1 TEXT NOT NULL,
NAME2 TEXT NOT NULL,
COMITEMVISIBLESTATUS INTEGER NOT NULL DEFAULT 0,
COMITEMUPDATEDATE DATETIME NOT NULL DEFAULT CURRENT_DATE,
UNIQUE (TABLEKIND,CODE)
);
CREATE TABLE T_GENRE (
GENREID INTEGER PRIMARY KEY AUTOINCREMENT,
GENRENAME TEXT NOT NULL UNIQUE,
GENREUPDATEDATE DATETIME NOT NULL DEFAULT CURRENT_DATE,
GENREVISIBLESTATUS INTEGER NOT NULL DEFAULT 0
);
CREATE TABLE T_GOAL (
GOALID INTEGER PRIMARY KEY AUTOINCREMENT,
GENREID INTEGER NOT NULL,
GOALNAME TEXT NOT NULL UNIQUE,
GOALUPDATEDATE DATETIME NOT NULL DEFAULT CURRENT_DATE,
GOALVISIBLESTATUS INTEGER NOT NULL DEFAULT 0,
FOREIGN KEY(GENREID) REFERENCES T_GENRE(GENREID) ON DELETE CASCADE
);
CREATE TABLE T_PLAN (
PLANID INTEGER PRIMARY KEY AUTOINCREMENT,
GOALID INTEGER NOT NULL,
PLANNAME TEXT NOT NULL UNIQUE,
PLANUPDATEDATE DATETIME NOT NULL DEFAULT CURRENT_DATE,
PLANVISIBLESTATUS INTEGER NOT NULL DEFAULT 0,
FOREIGN KEY(PLANID) REFERENCES T_GOAL(GOALID) ON DELETE CASCADE
);
CREATE TABLE T_WORK (
WORKID INTEGER PRIMARY KEY AUTOINCREMENT,
PLANID INTEGER NOT NULL,
WORKNAME TEXT NOT NULL,
PRIORID INTEGER NOT NULL,
WORKSTARTDATE DATETIME NOT NULL DEFAULT CURRENT_DATE,
WORKENDDATE DATETIME NOT NULL DEFAULT CURRENT_DATE,
WORKVISIBLESTATUS INTEGER NOT NULL DEFAULT 0,
WORKUPDATEDATE DATETIME NOT NULL DEFAULT CURRENT_DATE,
UNIQUE(PLANID,WORKNAME),
FOREIGN KEY(WORKID) REFERENCES T_PLAN(PLANID) ON DELETE CASCADE
);
CREATE TABLE T_SCHEDULE (
SCHEDULEID INTEGER PRIMARY KEY AUTOINCREMENT,
WORKID INTEGER NOT NULL,
STATUSID INTEGER NOT NULL,
SCHEDULEDATE DATETIME NOT NULL DEFAULT CURRENT_DATE,
SCHEDULESTARTTIME DATETIME NOT NULL DEFAULT CURRENT_DATE,
SCHEDULEENDTIME DATETIME NOT NULL DEFAULT CURRENT_DATE,
SCHEDULEVISIBLESTATUS INTEGER NOT NULL DEFAULT 0,
SCHEDULEUPDATEDATE DATETIME NOT NULL DEFAULT CURRENT_DATE,
FOREIGN KEY(WORKID) REFERENCES T_WORK(WORKID) ON DELETE CASCADE,
UNIQUE(SCHEDULEDATE,SCHEDULESTARTTIME,SCHEDULEENDTIME,WORKID)
);